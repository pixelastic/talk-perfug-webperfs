<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Les webperfs pour les nuls</title>
  <meta name="description" content="Présentation PerfUG Août 2014">
  <meta name="author" content="Timothée Carry">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="css/reveal.min.css">
  <link rel="stylesheet" href="css/theme/octo.css" id="theme">
  <link rel="stylesheet" href="css/custom.css">
  <link rel="stylesheet" href="lib/css/zenburn.css">
  <script>
    if (window.location.search.match(/print-pdf/gi)) {
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = 'css/print/pdf.css';
      document.getElementsByTagName('head')[0].appendChild(link);
    }
  </script>
  <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>
  <div class="reveal">
    <div class="slides">

      <!--HOME-->
      <section>
        <h1>Les webperfs<br />pour les nuls</h1>
      </section>

      <!--WHO AM I ?-->
      <section>
        <h2>Timothée Carry</h2>
        <ul>
          <li>Consultant Octo Technology</li>
          <li>Spécialiste en Web Front</li>
          <li><a href="https://twitter.com/pixelastic/">@pixelastic</a> à l'extérieur</li>
        </ul>
      </section>

      <!--WHY ?-->
      <section>
        <section data-background="/img/why-background.jpg">
          <h1>Pourquoi ?</h1>
        </section>
        <section>
          <h3>Impact sur la marque</h3>
          <ul>
            <li>
              <p>Utilisateurs de moins en moins patients</p>
              <ul>
                <li>Site lent au bout de 4s en 2008, 3s en 2014</li>
                <li>Nouvelle génération habituée à l'instantané</li>
                <li>Explosion du nombre de terminaux mobiles</li>
              </ul>
            </li>
            <li>
              <p>Relation à l'image de marque</p>
              <ul>
                <li>Avantage concurrentiel si rapide</li>
                <li>Frustration reportée sur la marque si lent</li>
              </ul>
            </li>
          </ul>
          <blockquote>Amazon perd 1% de ventes pour chaque tranche de 100ms de chargement</blockquote>
        </section>
      </section>

      <!--SERVER-->
      <section data-background="/img/server-background.jpg">
        <h1>Serveur</h1>
      </section>

      <!--CONCATENATE-->
      <section>
        <section data-background="#000000" class="slide-bref">
          <h3>Bref, j'ai limité mes requêtes</h3>
        </section>
        <section>
          <img src="./img/server/client-server.png" alt="Il m'a regardé, je l'ai regardé" width="500" />
          <aside class="notes">
            Échanges ressemblent souvent à ça avant qu'il ne se passe quoi que ce soit
          </aside>
        </section>
        <section>
          <h3>france.fr</h3>
          <img src="img/server/concatenate-france.png" />
          <h3>github.com</h3>
          <img src="img/server/concatenate-github.png" />
        </section>
        <section>
          <ul>
            <li>
              <p>Blocking : temps perdu à ne rien faire</p>
              <ul>
                <li>Entre <code>requestTime</code> et <code>startTime</code>
                </li>
                <li>UI, local cache, DNS lookup, <strong>limit of max connections</strong></li>
                <li>Recommence à chaque requête</li>
              </ul>
            </li>
            <li>Seulement 1 (ou 2) fichiers CSS et Javascript</li>
          </ul>
          <aside class="notes">
            <code>requestTime</code> est le moment où le browser sait qu'il doit faire une requete<br />
            <code>startTime</code> est le moment où il le fait<br />
            Blocking est temps passé par le browser. Dépends de la vitesse du client. Généralement négligeable, sauf si attente de connection ouverte<br />
            Limite de connection est de 2 dans la spec, browsers vont de 2 à 8
           </aside>
        </section>
      </section>

      <!--COMPRESSION-->
      <section>
        <section>
          <h3>Gzip all teh things</h3>
          <img src="img/server/gzip.jpg" alt="GZIP ALL TEH THINGS!" />
        </section>
        <section>
          <ul>
            <li>
              <p>Gain de 66% en moyenne</p>
              <ul>
                <li>Gain plus importants sur des gros fichiers</li>
                <li>Très facile à mettre en place</li>
                <li>Très bon support navigateur (IE5.5+)</li>
              </ul>
            </li>
            <li>
              <p>Large spectre</p>
              <ul>
                <li>HTML / CSS / Javascript</li>
                <li>XML / JSON</li>
                <li>SVG / WOFF</li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <h3>france.fr</h3>
          <div class="row col3">
            <div class="column">
              <h4>18 fichiers</h4>
              <pre><code>apachesolr_autocomplete.css
base.css
content-module.css
content_multigroup.css
ctools.css
date.css
defaults.css
extlink.css
fieldgroup.css
filefield.css
fw.css
global.css
jquery.timeentry.css
node.css
system.css
tagadelic.css
user.css
views.css</code></pre>
              <p>154K</p>
            </div>
            <div class="column">
              <h4>18 fichiers gzippés</h4>
              <pre><code>apachesolr_autocomplete.gz
base.gz
content-module.gz
content_multigroup.gz
ctools.gz
date.gz
defaults.gz
extlink.gz
fieldgroup.gz
filefield.gz
fw.gz
global.gz
jquery.timeentry.gz
node.gz
system.gz
tagadelic.gz
user.gz
views.gz </code></pre>
              <p>33K</p>
            </div>
            <div class="column">
              <h4>1 fichier gzippé</h4>
              <pre><code>all-in-one.gz</code></pre>
              <p>28K</p>
            </div>
          </div>
        </section>
        <section>
          <h4>Apache</h4>
          <pre><code>&lt;IfModule mod_deflate.c&gt;
  &lt;IfModule mod_filter.c&gt;
    AddOutputFilterByType DEFLATE "application/javascript" "application/json" \
"text/css" "text/html" "text/xml" [...]
  &lt;/IfModule&gt;
&lt;/IfModule&gt;</code></pre>
          <h4>Lighttpd</h4>
          <pre><code>server.modules += ( "mod_compress" )
compress.filetype  = ("application/javascript", "application/json", \
"text/css", "text/html", "text/xml", [...] )</code></pre>
          <h4>nginx</h4>
          <pre><code>gzip on;
gzip_types application/javascript application/json text/css text/html text/xml [...]; </code></pre>
        </section>
        <section>
          <h3>Attention aux proxies</h3>
          <ul>
            <li>Décompression</li>
            <li>Modification du <code>Accept-Encoding</code> de la requête
            </li>
            <li>Modification du <code>Content-Encoding</code> de la réponse
            </li>
          </ul>
          <aside class="notes">
            Peuvent forcer la décompression et retourner du contenu normal (aucun interet)<br />
            Peuvent manger la request et donc requete qui dit qu'elle ne comprends pas le gzip<br />
            Peut, pire, manger la réponse et retourner du gzip sans l'annoncer
          </aside>
        </section>
      </section>

      <!--MINIFICATION-->
      <section>
        <section data-background="/img/server/minification.jpg">
          <h1>Minification</h1>
        </section>
        <section>
          <div class="row col2">
            <div class="column">
              <ul>
                <li>
                  <p>Suppression de l'inutile</p>
                  <ul>
                    <li>Commentaires</li>
                    <li>Whitespace</li>
                  </ul>
                </li>
                <li>
                  <p>Réécriture plus légère</p>
                  <ul>
                    <li>Valeurs par défaut</li>
                    <li>Noms de variables</li>
                    <li>Mutualisation</li>
                  </ul>
                </li>
              </ul>
            </div>
            <div class="column">
              <img src="/img/server/grunt.png" alt="Grunt" />
            </div>
          </div>
        </section>
        <section>
          <div class="row col3">
            <div class="column">
              <h3>clean-css</h3>
              <p><code>main.css</code>
              </p>
              <pre><code class="expanded">apachesolr_autocomplete.message{font-size:80%;color:#888}.apachesolr_autocomplete.count{float:right}div.apachesolr_autocomplete.suggestion{display:inline;float:left}div.ac_results li{list-style:none;background-image:none!important}</code></pre>
              <p>154K ⇒ 111K</p>
            </div>
            <div class="column">
              <h3>uglify-js</h3>
              <p><code>main.js</code>
              </p>
              <pre><code class="expanded">apachesolr_ajax={};apachesolr_ajax.finalize=function(settings){pm.maps();$("#tooltip").hide();pm.tooltips();pm.jScrollPane();pm.carousels();pm.datepicker();pm.chooseLanguage();pm.popins();$("#filters-nav li").find(".indicator").hide();$("#overlay").hide();$("#filters-nav li").removeClass("active");$(".item a").hover(function(){$(this).find(".short").addClass("accessibility")},function(){$(this).find(".short").removeClass("accessibility")})};</code></pre>
              <p>428K ⇒ 331K</p>
            </div>
            <div class="column">
              <h3>html-minifier</h3>
              <p><code>index.html</code>
              </p>
              <pre><code class="expanded">&lt;body class=layout-home&gt;&lt;div class=apachesolr_ajax&gt;&lt;/div&gt;&lt;div id=content class=gradient-1&gt;&lt;p id=access-keys&gt;&lt;a href=#page&gt;Allez au contenu&lt;/a&gt; &lt;a href=#nav&gt;Allez à la navigation&lt;/a&gt; &lt;a href=#search&gt;Allez à la recherche&lt;/a&gt; &lt;a href=#lang lang=en&gt;Change language&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/body&gt; </code></pre>
              <p>50K ⇒ 39K</p>
            </div>
          </div>
        </section>
      </section>

      <!--COOKIELESS-->
      <section>
        <section data-background="/img/server/cookies-background.jpg">
          <h2>Régime sans cookies</h2>
        </section>
        <!-- <section> -->
        <!--   <img src="img/server/cookies.jpg" alt="U eated my cookie ?" /> -->
        <!-- </section> -->
        <section>
          <ul>
            <li>Envoyé sur chaque requête (300B en moyenne)</li>
            <li>Inutile pour les assets statiques</li>
          </ul>
        </section>
        <section>
          <h2>france.fr</h2>
          <div class="row col2">
            <div class="column">
              <h3>fieldgroup.css</h3>
              <pre><code>div.fieldgroup {
margin:.5em 0 1em 0;
}
div.fieldgroup .content {
  padding-left:1em;/*LTR*/
}</code></pre>
              <p>454B</p>

            </div>
            <div class="column">
              <h3>Cookie header</h3>
              <pre><code class="cropped">has_js=1;
xtvrn=$499610$;
xtan499610=-;
xtant499610=1;
__utma=132163929.1854756013.1405454567.1405454567.1405454567.1;
__utmb=132163929.1.10.1405454567;
__utmc=132163929;
__utmz=132163929.1405454567.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)</code></pre>
              <p>249B</p>
            </div>
          </div>
        </section>
        <section>
          <h3>Simple redirection CNAME</h3>
          <pre><code>static.france.fr 10800 IN CNAME www.france.fr.</code></pre>
          <p>ou</p>
          <pre><code>static-france.fr 10800 IN CNAME www.france.fr.</code></pre>
          <aside class="notes">
            Faire pointer sous-domaine, ou domaine externe vers même site<br />
            Rien de spécial à faire
          </aside>
        </section>
        <section>
          <h3>www.domain.com > domain.com</h3>
          <ul>
            <li>Cookies sur <code>domain.com</code> s'étendent sur <code>*.domain.com</code>
            </li>
            <li><code>_setDomainName</code> pour Google Analytics</li>
          </ul>
          <aside class="notes">
            Les cookies d'un domain parent s'étendent à tous les domaines enfants<br />
            D'où, utiliser un www pour le site, pour pas que cookies envoyés sur assets
          </aside>
        </section>
      </section>

      <!--IMAGES-->
      <section>
        <section>
          <h2>Les images</h2>
        </section>
        <section>
          <ul>
            <li>
              <p>Un poids lourd sur la page</p>
              <ul>
                <li>58 fichiers</li>
                <li>total 2.4Mo</li>
                <li>max 330Ko</li>
              </ul>
            </li>
            <li>
              <p>Différents formats, différents usages</p>
              <ul>
                <li>jpg : photos</li>
                <li>png : transparence</li>
                <li>svg : vectoriel</li>
                <li>gif : lolcats</li>
              </ul>
            </li>
          </ul>
        </section>
        <!--JPG-->
        <section>
          <h2>JPG, pour les photos</h2>
          <p>
            <img src="/img/server/jpg-original.jpg" width="328" />
          </p>
          <p><code>117Ko</code>
          </p>
          <ul>
            <li>
              <p>Deux types de compression</p>
              <ul>
                <li>Lossless : Suppression des metadatas</li>
                <li>Lossy : Suppression d'informations visuelles</li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <h3>Lossless</h3>
          <code>exiftool</code>
          <pre><code>Global Angle             : 30
Global Altitude          : 30
Photoshop Quality        : 8
Photoshop Format         : Standard
Progressive Scans        : 3 Scans
Creator Tool             : Adobe Photoshop CS5 Windows
Metadata Date            : 2012:03:07 14:30:01+01:00
Document ID              : xmp.did:95857168571111E19FCB8718798C7280
Original Document ID     : xmp.did:95857168571111E19FCB8718798C7280
Color Mode               : RGB
History Action           : saved
History Instance ID      : xmp.iid:2D7184A45968E1119E06F8EC5C23B74C
History When             : 2012:03:07 14:30:01+01:00
History Software Agent   : Adobe Photoshop CS5 Windows
History Changed          : /
Thumbnail Image          : (Binary data 2692 bytes)</code></pre>
          <p><code>jpegtran</code>
          </p>
          <p>31Ko ⇒ 3.9Ko</p>
          <aside class="notes">
            Attention au copyright, etc.<br />
          </aside>
        </section>
        <section>
          <h3>Lossy</h3>
          <div class="row col2">
            <div class="column">
              <img src="/img/server/jpg-original.jpg" width="328" />
              <p><code>117Ko</code>
              </p>
            </div>
            <div class="column">
              <img src="/img/server/jpg-lossy.jpg" width="328" />
              <p><code>41Ko</code>
              </p>
            </div>
          </div>
          <p>
            <code>jpegoptim</code>
          </p>
          <p>Invisible à l'œil nu pour compression ~80%</p>
          <aside class="notes">
            Les graphistes ont un oeil plus aiguisé que le notre là dessus
          </aside>
        </section>
        <!--PNG-->
        <section>
          <h2>PNG, multitaches</h2>
          <ul>
            <li>
              <p>Format polyvalent</p>
              <ul>
                <li>Transparence alpha</li>
                <li>Palette 256 couleurs (PNG8) ou infinité (PNG24)</li>
              </ul>
            </li>
          </ul>
          <div class="row col2">
            <div class="column">
              <p>
                <img src="/img/server/png-france.png" alt="original" />
              </p>
              <p><code>5.7Ko</code>
              </p>
            </div>
            <div class="column">
              <p>
                <img src="/img/server/png-pngquant.png" alt="après pngquant" />
              </p>
              <p><code>4.4Ko</code>
              </p>
            </div>
          </div>
          <p>
            <code>pngquant</code>
          </p>
          <aside class="notes">
            Format de référence. A privilégier.
          </aside>
        </section>
        <!--SVG-->
        <section>
          <h2>SVG, l'image en XML</h2>
          <img src="/img/server/starbucks.svg" alt="logo Starbucks en SVG" />
          <pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"&gt;
&lt;svg  version="1.1" xmlns="&ns_svg;" xmlns:xlink="&ns_xlink;" width="200" height="200.395" viewBox="274.62 554.459 200 200.395"
	 overflow="visible" enable-background="new 274.62 554.459 200 200.395" xml:space="preserve"&gt;
&lt;path id="R_mark" fill="#010101" d="M439.469,737.486c3.126,0,5.808,2.431,5.808,5.73c0,3.33-2.679,5.759-5.808,5.759
	C444.159,740.476,442.102,738.415,439.469,738.415z M438.243,746.547h-1.021v-6.629h2.538c1.58,0,2.354,0.588,2.354,1.888
	c0,1.194-0.744,1.704-1.735,1.827l1.89,2.913h-1.114l-1.766-2.881h-1.147L438.243,746.547L438.243,746.547L438.243,746.547z
   M438.243,742.83h1.21c1.238,0,1.641-0.357,1.641-1.086c0-0.634-0.31-0.991-1.472-0.991h-1.379V742.83L438.243,742.83z"/&gt;</code></pre>
          <p>SVG : <code>18Ko</code>, <code>7.9Ko</code> gzippé</p>
          <p>PNG : <code>14Ko</code>
          </p>
          <aside class="notes">
            Peut servir de format source, éditable, et versionnable.<br />
          </aside>
        </section>
        <section>
          <ul>
            <li>
              <p>Vectoriel</p>
              <ul>
                <li>Scalable à toutes les résolutions</li>
              </ul>
            </li>
            <li>
              <p>XML dans le DOM</p>
              <ul>
                <li>Stylable en CSS</li>
                <li>Versionnable</li>
                <li>Gzippable</li>
              </ul>
            </li>
            <li>IE9+</li>
          </ul>
        </section>
        <!--GIF-->
        <section>
          <h2>GIF, à oublier</h2>
          <ul>
            <li>256 couleurs max</li>
            <li>Transparence simple</li>
            <li>Pas de compression</li>
            <li>Animation en boucle</li>
            <li>Filesize plus faible uniquement sur petits fichiers</li>
          </ul>
        </section>
        <section data-background="/img/server-gif.gif"></section>
      </section>

      <!--SPRITES-->
      <section>
        <section>
          <h3>CSS Sprites</h3>
          <img src="/img/server-sprite-fun.jpg" alt="CSS Sprites" />
        </section>
        <section>
          <p>Concaténation appliquée aux images</p>
          <p>
            <img src="/img/server/sprite-secret-of-mana.png" />
          </p>
          <p>
            <img src="./img/server/sprite-google.png" alt="Google sprite" style="background:white"/>
          </p>
          <aside class="notes">
            Initialement utilisé dans les jeux vidéos
          </aside>
        </section>
        <section>
          <p>On joue sur background-position en CSS</p>
          <pre><code>a {
  display:block;
  width:15px;
  height:15px;
  background:url(image.png) 0px 0px no-repeat;
}
a:hover {
  background-position:0px -15px;
}</code></pre>
          <p><code>grunt spritesmith</code>, Compass, www.spritecow.com</p>
          <aside class="notes">
            Attention aux dimensions, marche sur dimensions fixes.<br />
            Possible de faire des repeat-x ou repeat-y, mais sprite spécial<br />
            Possible aussi d'utiliser une icon-font dans certains cas
          </aside>
        </section>
      </section>

      <!--CACHE-->
      <section>
        <section>
          <h1>Cache</h1>
          If U have it, Y U NO use cache ?
        </section>
        <section>
          <h3>Fraicheur</h3>
          <ul>
            <li>Date limite de consommation</li>
            <li>Rapide, pas de requete si encore frais</li>
            <li>
              <p>Deux headers</p>
              <ul>
                <li><code>Expires: Thu, 04 May 2014 20:00:00 GMT</code> ✘</li>
                <li><code>Cache-Control: max-age=3600, must-revalidate</code> ✔</li>
              </ul>
            </li>
          </ul>
          <aside class="notes">
            Expires accepte une date absolue, GMT<br />
            Cache-Control accepte une date relative, forcer avec no-cache, ou public/private si derrière une BasicAuth
          </aside>
        </section>
        <section>
          <h3>Validation</h3>
          <ul>
            <li>
              <p>Vérification que le client possède la dernière version</p>
              <ul>
                <li>Oui : 304 - Not Modified</li>
                <li>Non: 200 - OK</li>
              </ul>
            </li>
            <li>Évite téléchargement inutile</li>
            <li>
              <p>Deux couples de headers</p>
              <ul>
                <li><code>Last-Modified: Mon, 04 May 2014 02:28:12 GMT</code> / <code>If-Modified-Since</code> ✔</li>
                <li><code>ETag: "3e86-410-3596fbbc"</code> / <code>If-None-Match</code> ✘</li>
              </ul>
            </li>
          </ul>
          <aside class="notes">
            Browser renvoit If-Modified-Sinced/If-None-Match sur les mêmes urls.<br />
            Attention ETag : collisions, génération en fonction inode, donc différent si shardé.
          </aside>
        </section>
        <section>
          <h3>Pragma ?</h3>
          <p><code>Pragma: no-cache</code> n'est pas un header de response</p>
          <aside class="notes">
            C'est un header de request, pour dire au serveur qu'on veut une version fresh
          </aside>
        </section>
        <section>
          <h3>Invalidation</h3>
          <blockquote>There are only two hard things in Computer Science: cache invalidation and naming things.</blockquote>
          <ul>
            <li>
              <p>Nouvelles urls (timestamp, hash, etc)</p>
              <ul>
                <li>github2-c9b5fd6520f5ab77dd823b1b2c81ff9c461b1374.css</li>
                <li>github-14e2a44e296739b8ec8d7763e88ed307a6d424e0.js</li>
              </ul>
            </li>
            <li><code>grunt filerev</code></li>
          </ul>
        </section>
      </section>


      <section data-background="/img/client-background.jpg">
        <h1>Client</h1>
      </section>

      <!--BREAKPOINTS-->
      <section>
        <ul>
          <li>firstByte. Réponse du serveur</li>
          <li>startRender. Quelque chose s'affiche</li>
          <li>startExecution ? Site devient utilisable (clic, javascript, etc)</li>
          <li>documentComplete. fin du rendering</li>
        </ul>
        <p>Clé est un affichage rapide sur startRender, puis progressif. documentComplete, on s'en moque.</p>
      </section>
      <section>
        <h3>JS bloquant</h3>
        <ul>
          <li>Bloquant quand télécharge. Rien d'autre ne dl (css, image). Pas de parsing DOM. Possible document.write. mettre en bas</li>
          <li>defer, fait charger automatiquement en fin de page. IE9- charge scripts désordre</li>
          <li>async, charge scripts en parallele, mais execute dès que recu. IE10+</li>
          <li>defer = mettre en bas de page, mais buggué IE9-. Donc mettre en bas mieux</li>
          <li>Peut utiliser async sur scripts qui sont indépendants. Pubs, sharing, etc</li>
        </ul>
      </section>
      <section>
        <h3>Prioriser</h3>
        <ul>
          <li>Facile. On coupe en deux. Le gros du site, et à coté les pubs, sharings, tracking. Chargés ensuite</li>
        </ul>
      </section>

      <!--CSS-->
      <section>
        <h3>Reflow/Repaint</h3>
        <ul>
          <li>Repaint : Changement de couleur des pixels. Cheap.</li>
          <li>Reflow / Layout : Réorganisation des éléments. Expensive.</li>
          <li>Composite : Géré par le GPU, sans passer par CPU, super bien animé. Mostly very cheap.</li>
          <li>http://csstriggers.com/</li>
          <li>D'ou CSS en haut pour que reflow minimum, donner dimensions au maximum.</li>
          <li>Eviter FOUC et parsing double</li>
          <li>taille des images dans html</li>
          <li>Limiter les reflows, utiliser des border 0px transparent pour seulement faire un repaint.</li>
          <li>Si possible faire des animations sur scale, translate, opacity</li>
      </section>
      <section>
        <h3>Optimisation CSS</h3>
        <ul>
          <li>Pas primordial, peu de gains à micro-optimiser</li>
          <li>Quelques petits trucs à ne PAS faire</li>
          <li>Parsing de droite vers gauche. Contre-intuitif. #toto .myClass a.active pas précis. .active-link plus précis</li>
          <li>Moins de hiérarchie, plus c'est rapide</li>
          <li>Limiter à trois niveaux. Préférer les classes que les tag</li>
          <li>Pas de selecteurs d'attributs avec regexp</li>
          <li>Selecteur universel seulement si top level. Couteux si div .class *</li>
          <li>On tombe très vite dans le pas pratique si on veut optimiser les CSS</li>
          <li>Tous les selecteurs CSS3 sont couteux</li>
          <li>uncss, criticalpath</li>
        </ul>
      </section>
      <section>
        <h3>Animations</h3>
        <ul>
          <li>Les faire en CSS et pas en JS</li>
          <li>Explication animations js (timeout pour execute régulièrement et savoir où dans l'anim)</li>
          <li>Relance un reflow à chaque boucle</li>
          <li>Si CSS, déclaratif, donc browser peut optimiser</li>
          <li>jamais de mouseover pour changer une classe. :hover</li>
        </ul>
      </section>

      <!--JAVASCRIPT-->
      <section>
        <h3>Usual suspects</h3>
        <ul>
          <li>Events sur onscroll, onmouse move. Solution debounce</li>
          <li>Ajouter des events dans le DOM un par un. Trop de reflow. Need batch</li>
          <li>Plein d'éléments, plein d'events. Mettre un event master sur le parent</li>
          <li>http://javascript.crockford.com/memory/leak.html. Selectionner element du DOM avec JS, lui ajouter un attribut qui le réference lui-même.</li>
        </ul>
      </section>

      <!--CONSERVATIVE-->
      <section>
        <h1>Keep only what you need</h1>
        <ul>
          <li>Tout code écrit est du code téléchargé et interprété. Pas de compilation</li>
          <li>Build sur mesure jQuery, Bootstrap, etc</li>
          <li>Microframework. http://microjs.com/#</li>
          <li>Lazy loading. Ne charge que si visible</li>
        </ul>
      </section>

      <section data-background="/img/human-background.jpg">
        <h1>Humain</h1>
      </section>

      <section>
        <h1>No frustration</h1>
      </section>

      <!--PERCEPTION LENTEUR-->
      <section>
        <h3>Réalité != Perception</h3>
        <ul>
          <li>"Oh, ce site est lent, quel dommage. Par contre je suis sur que la marque est très performante". No one. Ever</li>
          <li>Site plus lent de 500ms, passe de "Simple, facile à utiliser" à "Basique, dur à utiliser"</li>
          <li>"Oh, ce site est trés rapide", "Oh, ce site marche très bien".</li>
          <li>On ne voit pas quand ça va vite, mais on ressent quand c'est lent</li>
        </ul>
      </section>

      <section>
        <h3>Différents spinners</h3>
        <img src="/img/human/windows-progress-bar-infinite.gif" alt="" />
        <ul>
          <li>barre de progression qui se remplit, plusieurs fois. very bad</li>
          <li>spinner infini mieux, fait pas de promesse</li>
          <li>Must est la barre qui se remplit avec % qui avance. Attention à pas rester trop longtemps à 100%</li>
          <li>Barre qui défile semble plus rapide</li>
          <li>&lt;100 ms, pas perceptible. 100-300 à peine. Mettre spinner que si plus de 300</li>
          <li>Cheat pour avoir un début lent et une acceleration vers la fin.</li>
        </ul>
      </section>


      <section>
        <h3>Annoncer échec</h3>
        <ul>
          <li>Si plante, ou prends trop de temps, annoncer que problème</li>
          <li>Si vraiment planté, s'assurer que le user puisse quand même naviguer. Pas d'overlay sur toute l'appli</li>
        </ul>
      </section>


      <!--PROGRESSIVE-->
      <section>
        <h1>Progressive</h1>
        <ul>
          <li>Images jpg en progressif</li>
          <li>Afficher quelque chose le plus vite possible. Ex. facebook mets des placeholders</li>
          <li>Mettre feedback que action réussit, même si requete même pas envoyée (envoyée en background)</li>
        </ul>
      </section>


      <!--CHEAT-->
      <section>
        <h3>If at first you don't succeed, blame it on your parents</h3>
        <ul>
          <li>Si lent, accuser l'OS et pas l'appli. Ce que fait Facebook.</li>
        </ul>
      </section>

      <section data-background="/img/questions-background.jpg">
        <h1>Questions ?</h1>
      </section>


      <section>
        <section>
          <h1>Annexes</h1>
        </section>
        <section>
          <h2>Des ressources existent depuis longtemps</h2>
          <ul>
            <li><a href="http://www.dailymotion.com/video/x7op91_eric-daspet-nicole-sullivan-perform_tech">ParisWeb 2008</a>
            </li>
            <li><a href="http://www.slideshare.net/jpvincent/performances-web-quoi-de-neuf">KiwiParty 2014</a>
            </li>
          </ul>
        </section>
        <section>
          <h3>Des outils matures</h3>
          <ul>
            <li><a href="http://www.webpagetest.org/">WebPageTest</a>
            </li>
            <li><a href="http://newrelic.com/">NewRelic</a>
            </li>
            <li><a href="http://appurify.com/">Appurify</a>
            </li>
            <li><a href="https://www.dareboost.com/en/home">Dareboost</a>
            </li>
          </ul>
        </section>

        <section>
          <h1>Serveur</h1>
        </section>

        <section>
          <h3>DNS, le goulet d'étranglement</h3>
          <ul>
            <li>Passage obligatoire de toute requête</li>
            <li>Zone grise entre le client et le serveur</li>
            <li>Limite de connections simultanées coté client</li>
            <li>Peu de solutions (limiter le nombre de domaines)</li>
          </ul>
        </section>

        <section>
          <h3>Le CDN est la dernière étape, pas la première</h3>
          <ul>
            <li>Souvent utilisé comme solution de facilité</li>
            <li>Gains plus importants sur les autres points</li>
          </ul>
        </section>

        <section>
          <h3>Adaptez à votre cas de figure</h3>
          <ul>
            <li><a href="http://www.jonathanklein.net/2014/02/revisiting-cookieless-domain.html">Etsy</a> charge ses assets statiques depuis le même domaine que le site principal</li>
          </ul>
        </section>

        <section>
          <h1>Sources</h1>
          <ul>
            <li>
              <a href="http://www.ravelrumba.com/blog/static-cookieless-domain/">Serving Static Content from a Cookieless Domain</a>
            </li>
            <li>
              <a href="https://groups.google.com/forum/?fromgroups=#!topic/speedtracer/MlF_gTvMRD8">What exactly does blocking under a network resource refer to ?</a>
            </li>
            <li><a href="http://calendar.perfplanet.com/2013/slow-pages-damage-perception/">Slow Pages Damage How Users Perceive Your Content, Design, and Navigation</a>
            </li>
            <li><a href="https://www.youtube.com/watch?v=enKJMUArlV4">Frontend at the Engineering Level</a></li>
            <li><a href="https://www.youtube.com/watch?v=-W0FBNbMLs0">CSS And The Critical Path</a></li>
            <li><a href="http://www.html5rocks.com/en/tutorials/speed/script-loading/">Async & Defer</a></li>
          </ul>
        </section>
      </section>
    </div>

  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.min.js"></script>

  <script>
    // Full list of configuration options available here:
     // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: false,
      progress: true,
      history: true,
      center: true,

      transition: 'linear',

      // Optional libraries used to extend on reveal.js
      dependencies: [{
        src: 'lib/js/classList.js',
        condition: function() {
          return !document.body.classList;
        }
      }, {
        src: 'plugin/highlight/highlight.js',
        async: true,
        callback: function() {
          hljs.initHighlightingOnLoad();
        }
      }, {
        src: 'plugin/notes/notes.js',
        async: true,
        condition: function() {
          return !!document.body.classList;
        }
      }]
    });
  </script>

</body>

</html>
