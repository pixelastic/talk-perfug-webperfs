<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Webperfs 101</title>
  <meta name="description" content="Présentation PerfUG Août 2014">
  <meta name="author" content="Timothée Carry">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="css/reveal.min.css">
  <link rel="stylesheet" href="css/theme/octo.css" id="theme">
  <link rel="stylesheet" href="css/custom.css">
  <link rel="stylesheet" href="lib/css/zenburn.css">
  <script>
    if (window.location.search.match(/print-pdf/gi)) {
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = 'css/print/pdf.css';
      document.getElementsByTagName('head')[0].appendChild(link);
    }
  </script>
  <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>
  <div class="reveal">
    <div class="slides">

      <!--HOME-->
      <section>
        <h1>Webperfs 101</h1>
      </section>

      <!--WHO AM I ?-->
      <section>
        <h2>Timothée Carry</h2>
        <ul>
          <li>Consultant Octo Technology</li>
          <li>Spécialiste front-end Web</li>
          <li><a href="https://twitter.com/pixelastic/">@pixelastic</a> à l'extérieur</li>
        </ul>
      </section>

      <!--POURQUOI-->
      <section>
        <h3>Pourquoi ?</h3>
        <p><blockquote>On ne remarque pas quand c'est rapide,<br>
            mais on ressent quand c'est lent.</blockquote></p>
        <ul>
          <li>Lenteur ressentie au bout de 4s en 2008, 3s en 2014</li>
          <li>Nouvelle génération habituée à l'instantané</li>
          <li>Explosion du nombre de terminaux mobiles</li>
        </ul>
      </section>

      <section>
        Plein de sujets à aborder, peut pas tous y toucher en 25 mn, donc essentiel
      </section>

      <!--SOMMAIRE-->
      <section>
        <h2>Sommaire</h2>
        <ol>
          <li><h4>Concatenate</h4></li>
          <li><h4>Compress</h4></li>
          <li><h4>Cache</h4></li>
          <li><h4>Cut</h4></li>
          <li><h4>Cheat</h4></li>
        </ol>
      </section>

      <!--CONCATENATE-->
      <section>
        <section>
          <h1>Concatenate</h1>
          <h3>Télécharger moins de fichiers</h3>
        </section>

        <section>
          <h3>france.fr</h3>
          <p><img src="./img/concatenate-france.png" alt="Waterfall france.fr" /></p>
          <h3>github.com</h3>
          <p><img src="./img/concatenate-github.png" alt="Waterfall github.com" /></p>
        </section>

        <section>
          <h3>Goulot d'étranglement</h3>
          <ul>
            <li>Latence DNS</li>
            <li>TCP Slow-start</li>
            <li>Overhead SSL</li>
            <li>Maximum de connections parallèlles</li>
          </ul>
        </section>
      </section>

      <!--COMPRESS-->
      <section>
        <section>
          <h1>Compress</h1>
          <h3>Télécharger des fichiers plus légers</h3>
        </section>

        <section>
          <img src="./img/compress-gzip.jpg" alt="GZIP ALL TEH THINGS!" />
        </section>

        <section>
          <h3>GZIP : La formule magique</h3>
          <ul>
            <li>Gain de 66% en moyenne</li>
            <li>Assets textuels : HTML, CSS, Javascript, XML, JSON</li>
            <li>Serveur : Apache, Lighttpd, Nginx, IIS</li>
            <li>Browser : IE5.5+</li>
          </ul>
        </section>

        <section>
          <h4>Apache</h4>
          <pre><code>&lt;IfModule mod_deflate.c&gt;
  &lt;IfModule mod_filter.c&gt;
    AddOutputFilterByType DEFLATE "application/javascript" "application/json" \
"text/css" "text/html" "text/xml" [...]
  &lt;/IfModule&gt;
&lt;/IfModule&gt;</code></pre>
          <h4>Lighttpd</h4>
          <pre><code>server.modules += ( "mod_compress" )
compress.filetype  = ("application/javascript", "application/json", \
"text/css", "text/html", "text/xml", [...] )</code></pre>
          <h4>nginx</h4>
          <pre><code>gzip on;
gzip_types application/javascript application/json text/css text/html text/xml [...]; </code></pre>
        </section>

        <section>
          <h3>Enlever le surpoids</h3>
          <ul>
            <li>Minification</li>
            <li>UnCSS</li>
            <li>Enlever code de debug, écrit, téléchargé, executé</li>
          </ul>
        </section>

        <section>
          <h3>Images</h3>
          <ul>
            <li>Lossless</li>
            <li>Lossy</li>
            <li>ImageOptim</li>
          </ul>
        </section>


      </section>

      <!--CACHE-->
      <section>
        <section>
          <h1>Cache</h1>
          <h3>Télécharger moins souvent</h3>
        </section>

        <section>
          <h3>Fraicheur</h3>
          <ul>
            <li>Date limite de consommation</li>
            <li>Rapide, pas de requete si encore frais</li>
            <li>
              <p>Deux headers</p>
              <ul>
                <li><code>Expires: Thu, 04 May 2014 20:00:00 GMT</code> ✘</li>
                <li><code>Cache-Control: max-age=3600, must-revalidate</code> ✔</li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h3>Validation</h3>
          <ul>
            <li>
              <p>Vérification que le client possède la dernière version</p>
              <ul>
                <li>Oui : 304 - Not Modified</li>
                <li>Non: 200 - OK</li>
              </ul>
            </li>
            <li>Évite téléchargement inutile</li>
            <li>
              <p>Deux couples de headers</p>
              <ul>
                <li><code>Last-Modified: Mon, 04 May 2014 02:28:12 GMT</code> / <code>If-Modified-Since</code> ✔</li>
                <li><code>ETag: "3e86-410-3596fbbc"</code> / <code>If-None-Match</code> ✘</li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h3>Un beau dessin</h3>
          <p><img src="./img/cache-graph.png" alt="Le cache dans un beau dessin" /></p>
        </section>

        <section>
          <h3>Invalidation</h3>
          <blockquote>There are only two hard things in Computer Science: cache invalidation and naming things.</blockquote>
          <ul>
            <li>Cache max (1 an)</li>
            <li>
              <p>Nouvelles urls (timestamp, hash, etc)</p>
              <ul>
                <li>github2-c9b5fd6520f5ab77dd823b1b2c81ff9c461b1374.css</li>
                <li>github-14e2a44e296739b8ec8d7763e88ed307a6d424e0.js</li>
              </ul>
            </li>
          </ul>
        </section>
      </section>

      <!--CUT-->
      <section>
        <section>
          <h1>Cut</h1>
          <h3>Télécharger en plusieurs morceaux</h3>
        </section>

        <section>
          <h3>Time to first byte</h3>
          <ul>
            <li>Flush après le head, pour parser plus rapidement</li>
            <li>Envoyer en moins de 15Ko pour TCP congestion</li>
          </ul>
        </section>

        <section>
          <h3>Time to start render</h3>
          <ul>
            <li>CSS Critical Path</li>
            <li>Découper le Js en must-have et should-have async</li>
            <li>defer/async, bloquant</li>
            <li>lazyloading images sous le fold</li>
          </ul>
        </section>

        <section>
          <h3>FTL (Faster Than Light)</h3>
          <ul>
            <li>Latence vitesse de la lumière incompressible</li>
            <li>Mettre sur CDN, plus proche, plus rapide. Suite du trajet sur toutes internes</li>
          </ul>
        </section>
      </section>

      <!--CHEAT-->
      <section>
        <section>
          <h1>Cheat</h1>
          <h3>Tout le monde le fait...</h3>
        </section>
        <!--CHEAT-->
        <section>
          <h3>Faire illusion</h3>
          <ul>
            <li>Feedback en avance (Instagram)</li>
            <li>Illusion d'optique (Gmail)</li>
            <li>Spinner plus rapide (Firefox)</li>
            <li>Spinner iOS (Facebook)</li>
          </ul>
          <blockquote>If at first you don't succeed, blame it on your parents</blockquote>
          <aside class="notes">
            <p>Instagram indique que la photo est envoyée alors qu'elle n'est pas partie, mais il le fait en background.</p>
            <p>Gmail utilise des barres de progressions qui vont plus vite à la fin qu'au début</p>
            <p>Possible aussi d'utiliser des progressbar animées qui tournent dans le sens inverse</p>
            <p>Firefox accélérait la vitesse du spinner à chaque release</p>
            <p>Quand Facebook utilise le spinner iOS, on crois que c'est le téléphone qui est lent</p>
          </aside>
        </section>
      </section>


      <!--QUESTIONS-->
      <section data-background="./img/questions-bg.jpg">
        <h1>Questions ?</h1>
      </section>


      <section>
        <h3>Notes</h3>
        <ul>
          <li><a href="http://talks.pixelastic.com/webperfs-takeofftalks/#/">Slides</a></li>
        </ul>
      </section>
    </div>

  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.min.js"></script>

  <script>
    // Full list of configuration options available here:
     // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: false,
      progress: true,
      history: true,
      center: true,

      transition: 'linear',

      // Optional libraries used to extend on reveal.js
      dependencies: [{
        src: 'lib/js/classList.js',
        condition: function() {
          return !document.body.classList;
        }
      }, {
        src: 'plugin/highlight/highlight.js',
        async: true,
        callback: function() {
          hljs.initHighlightingOnLoad();
        }
      }, {
        src: 'plugin/notes/notes.js',
        async: true,
        condition: function() {
          return !!document.body.classList;
        }
      }]
    });
  </script>

</body>

</html>
